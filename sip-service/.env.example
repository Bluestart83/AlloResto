# ============================================================
# AlloResto — SIP Service Configuration
# Copier vers .env et remplir les valeurs
# ============================================================

# ============================================================
# DATABASE
# ============================================================
# POC (SQLite) :
DATABASE_TYPE=sqlite
DATABASE_URL=./database.db

# Production (PostgreSQL) :
# DATABASE_TYPE=postgres
# DATABASE_URL=postgresql://user:password@localhost:5432/voiceorder

# ============================================================
# GOOGLE MAPS (geocodage, distance, places)
# ============================================================
# APIs a activer dans Google Cloud Console :
#   - Geocoding API
#   - Distance Matrix API
#   - Places API (textsearch + details + photos)
GOOGLE_MAPS_API_KEY=
SERPAPI_KEY=

# ============================================================
# OPENAI (Realtime API + Vision pour scan menu)
# ============================================================
OPENAI_API_KEY=sk-...

# ============================================================
# CHIFFREMENT SIP (obligatoire pour les mots de passe en BDD)
# ============================================================
# Generer avec: openssl rand -hex 32
ENCRYPTION_KEY=

# ============================================================
# SIP / TELEPHONIE
# ============================================================
# Credentials SIP globaux (fallback si le restaurant n'a pas sa propre ligne)
# Chaque restaurant a ses propres credentials en BDD (table phone_lines)
SIP_DOMAIN=sip.ovh.fr
SIP_USERNAME=
SIP_PASSWORD=
RESTAURANT_ID=                     # Uniquement pour lancement manuel de app.py

# TURN/STUN (optionnel, pour NAT traversal)
TURN_SERVER=
TURN_USERNAME=
TURN_PASSWORD=

# ============================================================
# SERVICE MANAGER
# ============================================================
SERVICE_MANAGER_PORT=8090          # Port API admin du service manager
APP_BASE_PORT=5050                 # Port de depart pour app.py (incremente par restaurant)
BRIDGE_BASE_PORT=5060              # Port de depart pour sipbridge (incremente par restaurant)
MAX_CALL_DURATION=600              # Duree max d'un appel en sec (defaut: 600 = 10 min, 0=illimite)

# ============================================================
# VAD — Voice Activity Detection (OpenAI Realtime)
# ============================================================
# Controle quand l'IA considere que le client a fini de parler
VAD_THRESHOLD=0.5                  # Sensibilite 0.0 (tres sensible) -> 1.0 (peu sensible)
VAD_SILENCE_MS=500                 # Duree de silence (ms) avant fin de tour du client
VAD_PREFIX_PADDING_MS=300          # Audio conserve (ms) avant le debut de parole detecte

# ============================================================
# NEXT.JS
# ============================================================
NEXT_API_URL=http://localhost:3000 # URL interne (utilise par le service manager)
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_SERVICE_MANAGER_URL=http://localhost:8090
NODE_ENV=development

# ============================================================
# OPTIONNEL — Futures integrations
# ============================================================
# TWILIO_ACCOUNT_SID=
# TWILIO_AUTH_TOKEN=
# STRIPE_SECRET_KEY=
# STRIPE_WEBHOOK_SECRET=
